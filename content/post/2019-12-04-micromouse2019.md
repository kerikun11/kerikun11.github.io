---
date: "2019-12-04T21:01:24+09:00"
title: "全日本マイクロマウス2019の結果報告"
categories:
  - "イベント"
tags:
  - "マイクロマウス"
  - "ロボコン"
  - "KERISE"
  - "ロボット技術研究会"
thumbnail: "icon.jpg"
spotlight: "true"
---

この記事は
[東京工業大学ロボット技術研究会(rogy) Advent Calendar 2019](https://adventar.org/calendars/4126)の
4日目の記事です。

こんにちは。けりです。  
今回は、2019年12月1日(日) に行われた、  
**第40回全日本マイクロマウス大会2019**の結果報告です。

<!--more-->

## マイクロマウスとは

マイクロマウスとは、約40年前から続く歴史あるロボット競技です。  
手のひらサイズの小さなロボットが、巨大な迷路を解いて高速に走行します。  
詳しくは、[マイクロマウス公式ページ](http://www.ntf.or.jp/mouse/)をどうぞ。

僕は、小さくて賢い知的ロボットに惹かれ、2016年から参加し始めました。

{{< postfig src="kerisev1.jpg" title="2016年に作った KERISE v1" width="240px" >}}

## 今年出走したマイクロマウス

今回、僕が制作したマイクロマウスは、 **KERISE v4** です。

{{< postfig src="kerisev4.jpg" title="KERISE v4" width="240px" link="kerisev4.jpg" >}}

{{< postfig src="kerisev4-palm.jpg" title="KERISE v4 の大きさ" width="240px" link="kerisev4-palm.jpg" >}}

前作の [KERISE v3](/posts/2017-03-28-kerisev3-coming/) からマイナーアップデートを施し、やや小型化しました。  
機体について詳しくは
[こちら](/posts/2018-05-03-kerise-v4-coming/)
の記事をどうぞ。

## 今年の目玉機能

今年は、他の人はまだやっていない、  
いくつかの **新機能** を搭載して大会に臨みました！

### 未知区間加速

マイクロマウスでは、「既知区間加速」という、
一度に通った道で、壁がないとわかっている直線を加速して走行する機能をよく目にします。

しかし、今回私が新たに搭載した機能は、まだ通っていない道でも加速する「未知区間加速」です。

不可能なことを言っているようにも聞こえますが、2区画前の壁を識別することで可能となります。

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">新たに「未知区間加速」を実装した！既知の直線だけでなく、未知の直線も前壁がなければ加速する！ <a href="https://t.co/rMdGr2vPbO">pic.twitter.com/rMdGr2vPbO</a></p>&mdash; けり (@kerikun11) <a href="https://twitter.com/kerikun11/status/1179663382644850689?ref_src=twsrc%5Etfw">October 3, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

詳しくは[こちらの記事](/posts/2019-10-12-unknown-accel/)をご覧ください。

### 自動復帰

もうひとつ、今年新たに搭載した機能が、クラッシュ後の自動復帰です。

マイクロマウスでは通常、クラッシュしてしまった場合は人間が回収してスタート位置に戻します。

しかし、マイクロマウスは自律性を求められているので、自力で復活するマウスを作りたいとずっと前から思っていました。

1年半ほど前から設計をはじめて、
今年、ついに完成させました！

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">本日、マイクロマウス全日本学生大会で披露した「自動復帰」の様子です。最短走行でクラッシュしてしまっても、周辺のマスを探索しながら既知のマップと照合し、自分が今どのマスにいるのかを特定します！！ <a href="https://t.co/6PC6rEFwvM">pic.twitter.com/6PC6rEFwvM</a></p>&mdash; けり (@kerikun11) <a href="https://twitter.com/kerikun11/status/1185920297658019840?ref_src=twsrc%5Etfw">October 20, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

この機能については、後日ブログにまとめようと思っていますのでお楽しみに！

2019.12.17 追記: [クラッシュ後の自動復帰](/posts/2019-12-18-auto-recovery-micromouse)の記事を書きました。

### 既知区間斜め

さらに、今年のKERISEは比較的安定していたので、
「既知区間斜め」にも挑戦ました。

既知区間斜めは、その名の通り、既に通って知っている移動経路は斜め走行をする機能です。  
斜め走行はクラッシュのリクスが高いので、もはや自己満足の域です。

この機能については、過去に搭載したマウスが存在していて、ずっと憧れていました。

## 出走動画

こちらが大会の出走動画です。10分ほどあります。

<iframe width="640" height="360" src="https://www.youtube.com/embed/HbphTsVLh7I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

### 走行の流れ

今回の走行の流れを次のようにまとめました。

| 時刻         | 動作                                           |
| :----------- | :--------------------------------------------- |
| 0:00 - 4:20  | ゴール区画までの探索                           |
| 4:20 - 4:27  | 最短経路の追加探索                             |
| 4:27 - 4:34  | V90連続でのクラッシュ → 姿勢復帰               |
| 4:34 - 5:05  | 自己位置を特定走行 → 自己位置を特定            |
| 5:05 - 6:13  | 追加探索の続きとスタートへの帰還               |
| 6:13 - 6:17  | 1回目の最短走行 → クラッシュ                   |
| 6:20 - 6:41  | 自己位置を特定する走行                         |
| 6:41 - 7:34  | ゴール区画へ行く(バグによりなぜか探索している) |
| 7:34 - 8:12  | スタート区画へ帰還                             |
| 8:12 - 9:30  | 2回目の最短走行                                |
| 9:32 - 10:48 | 4回目の最短走行                                |
| 10:48        | タイムオーバーで5回目の最短走行はできず終了    |

## 結果

### マイクロマウス競技ファイナル 11位

記録は **34.789 秒**で、マイクロマウス競技ファイナル第11位でした。  
速いパラメータだった第2走行目はクラッシュしてしまったので、
これは第3走目の最短走行の記録です。  
まだまだですね...

{{< postfig src="record.jpg" title="認定証・第11位" width="240px" >}}

### 特別賞 x 2 (史上初?)

今年新たに搭載した「未知区間加速」や「自動復帰」などを評価して頂き、
なんと、 **特別賞を2つ** 受賞しました！

表彰式では、特別賞の理由を大きく取り上げていただきました。  
本当に嬉しかったです。本当にありがとうございました！

{{< postfig src="awards.jpg" title="特別賞2つ" width="540px" >}}

## 反省

### 自律賞を逃した

残念ながら、今回は、目標としてた自律賞を獲得することはできませんでした。  

自律賞は、制限時間内に5回の走行をすべてノータッチで走りきったマウスに与えられます。

僕のマウスはノータッチではあったものの、時間が足りず、5回を走りきることができませんでした。

### 最短経路が思ったより長かった

実は、タイムオーバーを防ぐために、時間による探索打ち切り機能が実装されていました。

そのタイマーは、最短走行の1往復を1分、つまり片道は30秒程度で走る想定で逆算して探索を打ち切るように組まれていました。

しかし、実際の KERISE v4 の最短走行の記録は34秒だったので、もっと走行時間を多く見積もるべきでした。

近年の傾向から、最短経路長が長くなっていることは知っていましたが、ここまで長いとは思いませんでした...

### 既知区間斜めのV90でクラッシュした

ある程度の安定性を認めて搭載した既知区間斜めでしたが、
V90の連続と呼ばれる走行難度の高い部分でクラッシュしてしまいました。

それのせいで時間が足りなくなったとも言えるので、もっと調整をしておくべきでした。

ただ、既知区間斜めの走りに観客が反応してくれていたので、搭載したこと自体には後悔はしていません！

### クラッシュ後になぜか1分ほど再探索をしていた

これはちょっと自分にも謎の現象だったのですが、
最短走行時にクラッシュしたあと、
数区画探索走行をしているように見えました。

既に探索は終わっていたはずなので、1分ほどのタイムロスになってしまいした。  
原因を特定して、修正したいです。

## まとめ

先輩に誘われ、3年前にマイクロマウスを始めました。

小さなマウスが時折魅せる、 **人間の想像を超えた動き** に感銘を受け、
僕もいつかそういうマウスを作りたいと思いながら制作を続けてきました。

今回、クラッシュ後の自動復帰などにより、
見ていた方々には **想像を超えた動き** を届けることができたかなと思います。

今年は壮大な迷路を前にして、惜しくも自律賞を獲得することはできませんでしたが、
来年こそは自律賞を獲得できるよう、さらなる対策をして臨みたいと思います。

KERISEが魅せる、 **想像を超えた動き** をお楽しみに！

{{< postfig src="mice.jpg" title="第40回全日本大会に出場したマウスたち" >}}
